bioguide: federalregister_maritime_240819
contact_form:
  method: POST
  action: "https://api.regulations.gov/v4/comments"
  steps:
    - visit: "https://www.federalregister.gov/documents/2024/07/05/2024-14370/deepwater-port-license-application-texas-gulflink-llc-final-environmental-impact-statement#open-comment"
    - javascript:
        - value: "document.querySelector('.comment_wrapper').style.display = 'block'"
    - click_on:
        - selector: "#start_comment"
    - find:
        - selector: "textarea[name='comment[comment]']"
    - wait:
        - value: 5
    - fill_in:
        - selector: "textarea[name='comment[comment]']"
          name: "comment[comment]"
          value: $MESSAGE
          required: true
          options:
            max_length: 2000
    - click_on:
        - selector: "div[data-submitter-type='individual'] input[type='radio']"        
    - javascript:
        - value: "document.querySelector('div.submitter-section-js[data-submitter-type=\"individual\"]').classList.remove('cj-hidden')"
    - fill_in:
        - name: "comment[firstName]"
          selector: "input[name='comment[firstName]']"
          value: $NAME_FIRST
          required: true
        - name: "comment[lastName]"
          selector: "input[name='comment[lastName]']"
          value: $NAME_LAST
          required: true
        - name: "comment[email]"
          selector: "input[name='comment[email]']"
          value: $EMAIL
          required: true
        - name: "comment[city]"
          selector: "input[name='comment[city]']"
          value: $ADDRESS_CITY
          required: true
        - name: "comment[zip]"
          selector: "input[name='comment[zip]']"
          value: $ADDRESS_ZIP5
          required: true        
    - select:
        - name: "comment[stateProvinceRegion]"
          selector: "select[name='comment[stateProvinceRegion]']"
          value: $ADDRESS_STATE_POSTAL_ABBREV
          required: true
          options:
            Alabama: AL
            Alaska: AK
            American Samoa: AS
            Arizona: AZ
            Arkansas: AR
            California: CA
            Colorado: CO
            Connecticut: CT
            Delaware: DE
            District of Columbia: DC
            Florida: FL
            Georgia: GA
            Guam: GU
            Hawaii: HI
            Idaho: ID
            Illinois: IL
            Indiana: IN
            Iowa: IA
            Kansas: KS
            Kentucky: KY
            Louisiana: LA
            Maine: ME
            Marshall Islands: MH
            Maryland: MD
            Massachusetts: MA
            Michigan: MI
            Minnesota: MN
            Mississippi: MS
            Missouri: MO
            Montana: MT
            Nebraska: NE
            Nevada: NV
            New Hampshire: NH
            New Jersey: NJ
            New Mexico: NM
            New York: NY
            North Carolina: NC
            North Dakota: ND
            Northern Marianas Islands: MP
            Ohio: OH
            Oklahoma: OK
            Oregon: OR
            Palau: PW
            Pennsylvania: PA
            Puerto Rico: PR
            Rhode Island: RI
            South Carolina: SC
            South Dakota: SD
            Tennessee: TN
            Texas: TX
            Utah: UT
            Vermont: VT
            Virgin Islands: VI
            Virginia: VA
            Washington: WA
            West Virginia: WV
            Wisconsin: WI
            Wyoming: WY
        - name: "comment[country]"
          selector: "select[name='comment[country]']"
          value: "United States"
          required: true   
    - javascript:
        - value: "var node = document.createElement('div'); var textNode = document.createTextNode('hi'); node.appendChild(textNode); document.querySelector('main').appendChild(node);"
    # - javascript:
    #     - value: "var node = document.createElement('div'); var textNode = document.createTextNode('hi'); node.appendChild(textNode); document.querySelector('body').appendChild(node); var baseLogFunction = console.log; console.log = function(){ baseLogFunction.apply(console, arguments); var args = Array.prototype.slice.call(arguments); for(var i=0;i<args.length;i++){ var node = createLogNode(args[i]); if (document.querySelector('body') != null) { document.querySelector('body').appendChild(node); } } }; function createLogNode(message){ var node = document.createElement('div'); var textNode = document.createTextNode(message); node.appendChild(textNode); return node; }; window.onerror = function(message, url, linenumber) { console.log('JavaScript error: ' + message + ' on line ' + linenumber + ' for ' + url); }; _regulationsDotGovAllowedFields = function() { var t, e; return t = ['comment', 'category', 'email', 'sendEmailReceipt', 'commentOnDocumentId', 'submissionType', 'submitterType'], e = $('#comment_submitterType').val(), 'INDIVIDUAL' === e ? t.concat(['firstName', 'lastName', 'city', 'stateProvinceRegion', 'zip', 'country', 'phone']) : 'ORGANIZATION' === e ? t.concat(['organizationType', 'organization']) : t }; o = _regulationsDotGovAllowedFields(); t = ['comment[sendEmailReceipt]']; $.ajax({ crossDomain: !0, contentType: 'application/vnd.api+json', excludeCsrfTokenHeader: !0, beforeSend: function(e) { return e.setRequestHeader('x-api-key', $('#new_comment').data('api-key')) }, url: 'https://api.regulations.gov/v4/comments', type: 'POST', data: JSON.stringify({ data: { attributes: _.reduce($('#new_comment').serializeArray(), function(e, n) { var r, i, a; return n.value && (r = n.name.match(/comment\\[(\\w*)\\]/), r && _.contains(o, r[1]) && (_.contains(t, n.name) ? (i = 'input[name =' + n.name + ']', a = $(i).is(':checked')) : a = n.value, e[r[1]] = a)), e }, {}), type: 'comments' } }) }).done(function(e) { var n, o, r, i; return r = { url: $('#new_comment').attr('action'), dataType: 'html', type: 'POST', data: $('#new_comment').serialize() }, n = $('#new_comment').data('agency'), o = $('#new_comment').data('document-number'), i = this, $.extend(r, t), r.url = '/my/documents/' + o + '/comments', r.data = { reg_gov_response_data: e.data }, $.ajax({ url: r.url, type: r.type, dataType: r.dataType, data: r.data, success: function(t) { $('body').append(t) }, headers: { 'X-CSRFToken': window.getAuthenticityTokenFromHead() }, error: function(t) { return i.trackCommentFormSubmissionError(422 === t.status ? 'Comment: Submit Comment Form Validation Error' : 'Comment: Submit Comment Form Error ' + t.error), i.error(t) } }) });"
    - wait:
        - value: 10
  success:
    headers:
      status: 200
    body:
      contains: Thank you! Your comment has been submitted
